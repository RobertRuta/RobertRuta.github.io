@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --background: 0 0% 100%;
  --foreground: 222.2 84% 4.9%;

  --muted: 210 40% 96.1%;
  --muted-foreground: 215.4 16.3% 46.9%;

  --popover: 0 0% 100%;
  --popover-foreground: 222.2 84% 4.9%;

  --card: 0 0% 100%;
  --card-foreground: 222.2 84% 4.9%;

  --border: 214.3 31.8% 91.4%;
  --input: 214.3 31.8% 91.4%;

  --primary: 222.2 47.4% 11.2%;
  --primary-foreground: 210 40% 98%;

  --secondary: 210 40% 96.1%;
  --secondary-foreground: 222.2 47.4% 11.2%;

  --accent: 210 40% 96.1%;
  --accent-foreground: 222.2 47.4% 11.2%;

  --ring: 215 20.2% 65.1%;

  --radius: 0.5rem;
}

.dark {
  --background: 222.2 84% 4.9%;
  --foreground: 210 40% 98%;

  --muted: 217.2 32.6% 17.5%;
  --muted-foreground: 215 20.2% 65.1%;

  --popover: 222.2 84% 4.9%;
  --popover-foreground: 210 40% 98%;

  --card: 222.2 84% 4.9%;
  --card-foreground: 210 40% 98%;

  --border: 217.2 32.6% 17.5%;
  --input: 217.2 32.6% 17.5%;

  --primary: 210 40% 98%;
  --primary-foreground: 222.2 47.4% 11.2%;

  --secondary: 217.2 32.6% 17.5%;
  --secondary-foreground: 210 40% 98%;

  --accent: 217.2 32.6% 17.5%;
  --accent-foreground: 210 40% 98%;

  --ring: 217.2 32.6% 17.5%;
}

html, body, :root {
  height: 100%;
}

/* Reserve scrollbar space to avoid layout shift when toggling overflow */
html {
  overflow-y: auto;
  scrollbar-gutter: stable both-edges;
}

/* Explicit scroll lock during crossfade transitions */
html.scroll-lock {
  overflow: hidden !important;
}

/* Terminal vibe is applied via body classes in layout */

.caret-green::after {
  content: '';
  display: inline-block;
  width: 0.6ch;
  height: 1em;
  background: currentColor;
  margin-left: 2px;
  animation: blink 1.2s step-end infinite;
}

/* Terminal scrollbars */
.terminal-scroll {
  scrollbar-width: thin;
  scrollbar-color: rgba(0,255,156,0.4) rgba(0,255,156,0.08);
}
.terminal-scroll::-webkit-scrollbar {
  width: 10px;
}
.terminal-scroll::-webkit-scrollbar-track {
  background: rgba(0,255,156,0.06);
}
.terminal-scroll::-webkit-scrollbar-thumb {
  background-color: rgba(0,255,156,0.4);
  border-radius: 8px;
  border: 2px solid rgba(0,255,156,0.08);
}
.terminal-scroll::-webkit-scrollbar-thumb:hover {
  background-color: rgba(0,255,156,0.6);
}

/* Filters trellis animation */
@keyframes chipIn {
  from { opacity: 0; transform: translateY(6px); }
  to { opacity: 1; transform: translateY(0); }
}
.filters-grid.show .filter-chip {
  animation: chipIn 300ms ease-out forwards;
  animation-fill-mode: both;
}
.filters-grid.reverse .filter-chip {
  animation: chipIn 250ms ease-in reverse forwards;
  animation-fill-mode: both;
}
.filters-grid.hidden .filter-chip {
  opacity: 0;
  transform: translateY(6px);
}

@keyframes overshootClose {
  0% { transform: scaleY(1); }
  50% { transform: scaleY(1.02); }
  100% { transform: scaleY(1); }
}
.filters-wrapper.closing {
  transform-origin: top;
  animation: overshootClose 380ms cubic-bezier(.37,.01,.63,.99);
}

/* Glitch transition overlay */
.glitch-overlay {
  background: #000;
  mix-blend-mode: screen;
  opacity: 0;
  animation: glitchSlices 800ms steps(1, end) both;
  will-change: transform, clip-path, opacity;
}
.glitch-overlay2 {
  background: #000;
  mix-blend-mode: screen;
  opacity: 0;
  animation: glitchSlices2 480ms steps(1, end) both;
  will-change: transform, clip-path, opacity;
}

@keyframes glitchSlices {
  0% { clip-path: inset(45% 8.3% 45% 8.3%); filter: none; opacity: 0.0; transform: translateX(0); }
  15% { clip-path: inset(45% 8.3% 45% 8.3%); filter: none; opacity: 0.2; transform: translateX(0); }
  25% { clip-path: inset(5% 8.3% 85% 8.3%); filter: none; opacity: 0.4; transform: translateX(-2%); }
  40% { clip-path: inset(5% 8.3% 85% 8.3%); filter: none; opacity: 0.3; transform: translateX(0); }
  55% { clip-path: inset(75% 8.3% 15% 8.3%); filter: none; opacity: 0.5; transform: translateX(10%); }
  70% { clip-path: inset(75% 8.3% 15% 8.3%); filter: none; opacity: 0.3; transform: translateX(0); }
  80% { clip-path: inset(25% 8.3% 65% 8.3%); filter: none; opacity: 0.15; transform: translateX(-20%); }
  85% { clip-path: inset(25% 8.3% 65% 8.3%); filter: none; opacity: 0.1; transform: translateX(-20%); }
  100% { clip-path: inset(25% 8.3% 65% 8.3%); filter: none; opacity: 0.0; transform: translateX(-5%); }
}

@keyframes glitchSlices2 {
  0% { clip-path: inset(0% 8.3% 0% 8.3%); filter: none; opacity: 0.0; transform: translateX(0); }
  25% { clip-path: inset(5% 8.3% 85% 8.3%); filter: none; opacity: 0.3; transform: translateX(10px); }
  50% { clip-path: inset(30% 8.3% 60% 8.3%); filter: none; opacity: 0.4; transform: translateX(2px); }
  62.5% { clip-path: inset(30% 8.3% 60% 8.3%); filter: none; opacity: 0.3; transform: translateX(0); }
  80% { clip-path: inset(47.5% 8.3% 47.5% 8.3%); filter: none; opacity: 0.2; transform: translateX(-1px); }
  90% { clip-path: inset(47.5% 8.3% 47.5% 8.3%); filter: none; opacity: 0.1; transform: translateX(0); }
  100% { clip-path: inset(0% 8.3% 0% 8.3%); filter: none; opacity: 0.0; transform: translateX(0); }
}

.glitch-overlay.streaks {
  background-image:
    /* Vertical noise bands - TV static pattern */
    repeating-linear-gradient(90deg,
      rgba(255,255,255,0.08) 0 1px,
      rgba(220,220,220,0.06) 1px 2px,
      rgba(180,180,180,0.04) 2px 3px,
      rgba(255,255,255,0.08) 3px 4px,
      rgba(120,120,120,0.03) 4px 5px,
      transparent 5px 8px),
    /* Random vertical streaks */
    repeating-linear-gradient(0deg,
      rgba(255,255,255,0.05) 0 2px,
      transparent 2px 4px,
      rgba(255,255,255,0.04) 4px 6px,
      rgba(200,200,200,0.03) 6px 8px,
      transparent 8px 12px),
    /* Fine horizontal scan lines */
    repeating-linear-gradient(0deg,
      transparent 0 1px,
      rgba(255,255,255,0.02) 1px 2px);
  opacity: 0.01;
  animation: streaksJitterX 800ms steps(8, end) both;
}

.glitch-overlay.noise {
  background-image:
    repeating-linear-gradient(0deg, rgba(0,255,156,0.3) 0 1px, transparent 1px 2px),
    repeating-linear-gradient(90deg, rgba(0,255,156,0.3) 0 2px, transparent 2px 4px);
  opacity: 0;
  animation: noiseShift 800ms steps(8, end);
}

.glitch-overlay.scanline {
  background: repeating-linear-gradient(0deg, rgba(0, 0, 0, 1) 0 2px, rgba(0,255,156,1) 2px 3px);
  opacity: 0;
  animation: scanlineMove 800ms linear infinite;
}

/* Additional chromatic layers for blue/green tint and horizontal jitter */
.glitch-overlay.chroma-green {
  background: linear-gradient(90deg, transparent 20%, rgba(84, 230, 176, 0.2) 50%, rgba(76, 207, 255, 0.4));
  mix-blend-mode: screen;
  opacity: 0;
  animation: chromaShift 800ms linear both;
}

.glitch-overlay.chroma-blue {
  background: linear-gradient(-90deg, transparent 20%, rgba(84, 230, 176, 0.2) 50%, rgba(251, 51, 228, 0.4));
  mix-blend-mode: screen;
  opacity: 0;
  animation: chromaShiftReverse 800ms linear both;
}





@keyframes noiseShift {
  0% { transform: translate3d(0,0,0); opacity: 0.5; }
  20% { transform: translate3d(-2px,1px,0); opacity: 0.05; }
  40% { transform: translate3d(1px,-1px,0); opacity: 0.04; }
  60% { transform: translate3d(2px,2px,0); opacity: 0.035; }
  80% { transform: translate3d(0,0,0); opacity: 0.02; }
  100% { transform: translate3d(0,0,0); opacity: 0; }
}

@keyframes scanlineMove {
  0% { background-position: 0 0; opacity: 0; }
  100% { background-position: 0 100%; opacity: 0; }
}

@keyframes chromaShift {
  0% { transform: translateX(0); opacity: 0.0; }
  15% { transform: translateX(2px); opacity: 0.05; }
  25% { transform: translateX(-3px); opacity: 0.02; }
  40% { transform: translateX(-12px); opacity: 0.08; }
  50% { transform: translateX(18px); opacity: 0.03; }
  80% { transform: translateX(-45px); opacity: 0.09; }
  100% { transform: translateX(0px); opacity: 0.0; }
}

@keyframes chromaShiftReverse {
  0% { transform: translateX(0); opacity: 0.0; }
  15% { transform: translateX(-2px); opacity: 0.05; }
  25% { transform: translateX(3px); opacity: 0.02; }
  40% { transform: translateX(12px); opacity: 0.09; }
  50% { transform: translateX(-18px); opacity: 0.03; }
  80% { transform: translateX(45px); opacity: 0.09; }
  100% { transform: translateX(0px); opacity: 0.0; }
}

@keyframes streaksJitterX {
  0% { background-position: 0 0, 0 0, 0 0; opacity: 0.0; }
  25% { background-position: 4px 0, -2px 0, 3px 0; opacity: 0.15; }
  50% { background-position: -3px 0, 3px 0, -2px 0; opacity: 0.25; }
  80% { background-position: 0px 0, 0px 0, 0px 0; opacity: 0.12; }
  100% { background-position: 0 0, 0 0, 0 0; opacity: 0.0; }
}

